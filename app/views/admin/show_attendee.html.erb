<div class="content-section">
  <div class="container">
    <div class="section-header">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h2 class="section-title" style="margin-bottom: 0;">Attendee Details</h2>
        <div style="display: flex; gap: 0.5rem;">
          <a href="<%= admin_path %>" class="btn btn-outline" style="padding: 0.5rem 1rem;">
            ‚Üê Back to Dashboard
          </a>
          <%= button_to "Logout", admin_logout_path, method: :delete, class: "btn btn-outline", style: "padding: 0.5rem 1rem;", data: { turbo: false } %>
        </div>
      </div>
    </div>
    
    <div class="section-content">
      <!-- Attendee Information Card -->
      <div class="detail-card" style="margin-bottom: 2rem;">
        <div class="detail-card-header">
          <h3 style="margin: 0; color: #2c5f2d;">
            <%= @attendee.first_name %> <%= @attendee.last_name %>
          </h3>
          <div style="margin-top: 0.5rem;">
            <% if @registration.paid? %>
              <% if @registration.paid_in_full? %>
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                  Paid in Full
                </span>
              <% elsif @registration.paid_deposit? %>
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                  Deposit Paid
                </span>
              <% else %>
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                  Paid
                </span>
              <% end %>
            <% else %>
              <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                Not Paid
              </span>
            <% end %>
          </div>
        </div>
        
        <div class="detail-card-body">
          <div class="detail-grid">
            <!-- Personal Information -->
            <div class="detail-section">
              <h4 class="detail-section-title">Personal Information</h4>
              <div class="detail-row">
                <span class="detail-label">Date of Birth:</span>
                <span class="detail-value"><%= @attendee.date_of_birth&.strftime("%B %d, %Y") %></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Age:</span>
                <span class="detail-value"><%= @attendee.age %></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Gender:</span>
                <span class="detail-value"><%= @attendee.gender || "N/A" %></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Ecclesia:</span>
                <span class="detail-value"><%= @attendee.ecclesia || "N/A" %></span>
              </div>
            </div>

            <!-- Contact Information -->
            <div class="detail-section">
              <h4 class="detail-section-title">Contact Information</h4>
              <% if @attendee.phone.present? %>
                <div class="detail-row">
                  <span class="detail-label">Phone:</span>
                  <span class="detail-value"><%= @attendee.phone %></span>
                </div>
              <% end %>
              <% if @attendee.email.present? %>
                <div class="detail-row">
                  <span class="detail-label">Email:</span>
                  <span class="detail-value"><%= @attendee.email %></span>
                </div>
              <% end %>
              <div class="detail-row">
                <span class="detail-label">Address:</span>
                <span class="detail-value">
                  <% if @attendee.address_line_1.present? %>
                    <%= @attendee.address_line_1 %><br>
                    <% if @attendee.address_line_2.present? %><%= @attendee.address_line_2 %><br><% end %>
                    <%= [@attendee.city, @attendee.state, @attendee.zip].compact.join(", ") %>
                  <% else %>
                    <em>Same as Guardian</em>
                  <% end %>
                </span>
              </div>
            </div>

            <!-- Camp Details -->
            <div class="detail-section">
              <h4 class="detail-section-title">Camp Details</h4>
              <div class="detail-row">
                <span class="detail-label">T-Shirt Size:</span>
                <span class="detail-value"><%= @attendee.tshirt_size || "N/A" %></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Piano:</span>
                <span class="detail-value"><%= @attendee.piano ? "Yes" : "No" %></span>
              </div>
            </div>

            <!-- Medical & Dietary Information -->
            <div class="detail-section">
              <h4 class="detail-section-title">Medical & Dietary Information</h4>
              <% if @attendee.medical_conditions.present? %>
                <div class="detail-row">
                  <span class="detail-label">Medical Conditions:</span>
                  <span class="detail-value"><%= @attendee.medical_conditions %></span>
                </div>
              <% end %>
              <% if @attendee.dietary_restrictions.present? %>
                <div class="detail-row">
                  <span class="detail-label">Dietary Restrictions:</span>
                  <span class="detail-value"><%= @attendee.dietary_restrictions %></span>
                </div>
              <% end %>
              <% if @attendee.allergies.present? %>
                <div class="detail-row">
                  <span class="detail-label">Allergies:</span>
                  <span class="detail-value"><%= @attendee.allergies %></span>
                </div>
              <% end %>
              <% if @attendee.special_needs.present? %>
                <div class="detail-row">
                  <span class="detail-label">Special Needs:</span>
                  <span class="detail-value"><%= @attendee.special_needs %></span>
                </div>
              <% end %>
              <% if @attendee.notes.present? %>
                <div class="detail-row">
                  <span class="detail-label">Notes:</span>
                  <span class="detail-value"><%= @attendee.notes %></span>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>

      <!-- Guardian Information Card -->
      <div class="detail-card" style="margin-bottom: 2rem;">
        <div class="detail-card-header">
          <h3 style="margin: 0; color: #2c5f2d;">Guardian Information</h3>
        </div>
        
        <div class="detail-card-body">
          <div class="detail-grid">
            <!-- Guardian 1 -->
            <div class="detail-section">
              <h4 class="detail-section-title">Guardian 1</h4>
              <div class="detail-row">
                <span class="detail-label">Name:</span>
                <span class="detail-value"><%= @registration.guardian_1_name %></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Email:</span>
                <span class="detail-value"><%= @registration.guardian_1_email %></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Phone:</span>
                <span class="detail-value"><%= @registration.guardian_1_phone %></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Address:</span>
                <span class="detail-value">
                  <%= @registration.guardian_1_address_line_1 %><br>
                  <% if @registration.guardian_1_address_line_2.present? %><%= @registration.guardian_1_address_line_2 %><br><% end %>
                  <%= @registration.guardian_1_city %>, <%= @registration.guardian_1_state %> <%= @registration.guardian_1_zip %>
                </span>
              </div>
            </div>

            <!-- Guardian 2 -->
            <% if @registration.guardian_2_name.present? %>
              <div class="detail-section">
                <h4 class="detail-section-title">Guardian 2</h4>
                <div class="detail-row">
                  <span class="detail-label">Name:</span>
                  <span class="detail-value"><%= @registration.guardian_2_name %></span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Email:</span>
                  <span class="detail-value"><%= @registration.guardian_2_email %></span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Phone:</span>
                  <span class="detail-value"><%= @registration.guardian_2_phone %></span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Address:</span>
                  <span class="detail-value">
                    <% if @registration.guardian_2_same_address %>
                      <em>Same as Guardian 1</em>
                    <% else %>
                      <%= @registration.guardian_2_address_line_1 %><br>
                      <% if @registration.guardian_2_address_line_2.present? %><%= @registration.guardian_2_address_line_2 %><br><% end %>
                      <%= @registration.guardian_2_city %>, <%= @registration.guardian_2_state %> <%= @registration.guardian_2_zip %>
                    <% end %>
                  </span>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>

      <!-- Emergency Contacts Card -->
      <div class="detail-card" style="margin-bottom: 2rem;">
        <div class="detail-card-header">
          <h3 style="margin: 0; color: #2c5f2d;">Emergency Contacts</h3>
        </div>
        
        <div class="detail-card-body">
          <div class="detail-grid">
            <div class="detail-section">
              <h4 class="detail-section-title">Emergency Contact 1</h4>
              <div class="detail-row">
                <span class="detail-label">Name:</span>
                <span class="detail-value"><%= @registration.emergency_contact_1_name %></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Phone:</span>
                <span class="detail-value"><%= @registration.emergency_contact_1_phone %></span>
              </div>
            </div>

            <% if @registration.emergency_contact_2_name.present? %>
              <div class="detail-section">
                <h4 class="detail-section-title">Emergency Contact 2</h4>
                <div class="detail-row">
                  <span class="detail-label">Name:</span>
                  <span class="detail-value"><%= @registration.emergency_contact_2_name %></span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Phone:</span>
                  <span class="detail-value"><%= @registration.emergency_contact_2_phone %></span>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>

      <!-- Payment Information Card -->
      <div class="detail-card">
        <div class="detail-card-header">
          <h3 style="margin: 0; color: #2c5f2d;">Payment Information</h3>
        </div>
        
        <div class="detail-card-body">
          <div class="detail-grid">
            <div class="detail-section">
              <div class="detail-row">
                <span class="detail-label">Total Amount:</span>
                <span class="detail-value">$<%= sprintf('%.2f', @registration.calculate_total_amount) %></span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Amount Paid:</span>
                <span class="detail-value">$<%= sprintf('%.2f', @registration.amount_paid || 0) %></span>
              </div>
              <% if @registration.paid_deposit? %>
                <div class="detail-row">
                  <span class="detail-label">Remaining Balance:</span>
                  <span class="detail-value">$<%= sprintf('%.2f', @registration.remaining_balance) %></span>
                </div>
              <% end %>
              <div class="detail-row">
                <span class="detail-label">Registration Date:</span>
                <span class="detail-value"><%= @registration.created_at.strftime("%B %d, %Y at %I:%M %p") %></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .detail-card {
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    overflow: hidden;
  }

  .detail-card-header {
    background-color: #f9fafb;
    padding: 1.5rem;
    border-bottom: 2px solid #e5e7eb;
  }

  .detail-card-body {
    padding: 1.5rem;
  }

  .detail-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }

  .detail-section {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .detail-section-title {
    color: #2c5f2d;
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #2c5f2d;
  }

  .detail-row {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .detail-label {
    font-weight: 600;
    color: #6b7280;
    font-size: 0.875rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .detail-value {
    color: #1f2937;
    font-size: 1rem;
    line-height: 1.5;
  }

  @media (max-width: 768px) {
    .detail-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .detail-card-header,
    .detail-card-body {
      padding: 1rem;
    }
  }
</style>
