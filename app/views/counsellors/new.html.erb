<div class="content-section">
  <div class="section-header">
    <h2 class="section-title">VOLUNTEER NOW! SPACE IS LIMITED!</h2>
    <div class="section-intro">
      <p>Please sign up to volunteer no later than April 15th.</p>
      <p>To be a counselor, you must be a baptized member in good standing and fellowship exclusively based on the BASF. If you would like to volunteer as a counselor, please fill out the form below</p>
      <p><strong>Please note:</strong> Submitting this form does not confirm you as a counselor. We will contact you if we could use your help.</p>
      <p>For more information on what the counseling experience is like, please refer to <%= link_to "our counselor FAQs", counsellor_info_path %>, or reach out to Bro. James and Sis. Kristen Styles.</p>
      <div class="contact-info-box">
        <p>
          <strong>Contact Information:</strong>
        </p>
        <p>
          <a href="tel:805-433-3409">805-433-3409</a><br>
          <a href="mailto:kidscampcalifornia@gmail.com">kidscampcalifornia@gmail.com</a>
        </p>
      </div>
    </div>
  </div>
  
  <div class="section-content">
    <div class="form-container">
      <%= form_with(url: counsellors_path, data: {turbo: false, initial_counsellor_count: @counsellors.length}, id: "counsellor-registration-form") do |f| %>
        <%# Honeypot: hidden from users; bots often fill it â€” reject submission if present %>
        <div class="hp" style="position: absolute; left: -9999px; width: 1px; height: 1px; overflow: hidden;" aria-hidden="true">
          <label for="counsellor_fax">Leave this blank</label>
          <input type="text" name="fax" id="counsellor_fax" tabindex="-1" autocomplete="off">
        </div>
        <% if flash[:alert] %>
          <div style="background-color: #fef2f2; border: 1px solid #fecaca; color: #991b1b; border-radius: 8px; padding: 16px; margin-bottom: 16px;">
            <p style="margin: 0;"><%= flash[:alert] %></p>
          </div>
        <% end %>

        <div id="counsellors-container">
          <% @counsellors.each_with_index do |counsellor, index| %>
            <%= render 'counsellor_fields', counsellor: counsellor, index: index %>
          <% end %>
        </div>

        <div style="margin-top: 16px; margin-bottom: 24px;">
          <button type="button" id="add-counsellor-btn" class="btn btn-outline" style="width: 100%;">
            + Add Another Counselor
          </button>
        </div>
        
        <div class="form-actions">
          <%= submit_tag "Submit Registration", class: "btn btn-primary w-full" %>
        </div>
      <% end %>
      
      
      <div style="margin-top: 24px; text-align: center;">
        <div>
          <%= link_to "Back to Home", root_path, style: "color: #2563eb; display: block; margin-top: 8px;" %>
        </div>
      </div>
    </div>
  </div>
</div>

<%= render 'counsellor_fields_template' %>
