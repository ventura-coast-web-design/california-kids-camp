<div class="attendee-form-group" style="border: 1px solid #d1d5db; border-radius: 8px; padding: 12px; margin-bottom: 12px; background-color: #f9fafb;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
    <h4 style="font-size: 16px; font-weight: 600; color: #374151;">Child</h4>
    <% unless f.object.new_record? %>
      <%= f.hidden_field :_destroy, class: 'destroy-field' %>
      <button type="button" class="remove-attendee-btn" style="color: #dc2626; font-size: 14px; background: none; border: none; cursor: pointer;">Remove</button>
    <% else %>
      <button type="button" class="remove-attendee-btn" style="color: #dc2626; font-size: 14px; background: none; border: none; cursor: pointer;">Remove</button>
    <% end %>
  </div>

  <div class="form-grid form-grid-2">
    <div class="form-group">
      <%= f.label :first_name, "First Name", class: "form-label" %>
      <%= f.text_field :first_name, class: "form-control", required: true %>
    </div>

    <div class="form-group">
      <%= f.label :last_name, "Last Name", class: "form-label" %>
      <%= f.text_field :last_name, class: "form-control", required: true %>
    </div>

    <div class="form-group">
      <%= f.label :date_of_birth, "Date of Birth", class: "form-label" %>
      <% 
        # Camp date: June 21, 2026
        # Calculate date range for ages 9-17 on camp start date
        # Must be at least 9 years old on June 21, 2026: born on or before June 21, 2017
        # Must be no older than 17 on June 21, 2026: born on or after June 22, 2008
        camp_start_date = Date.new(2026, 6, 21)
        max_date = Date.new(2017, 6, 21)  # To be at least 9 years old
        min_date = Date.new(2008, 6, 22)  # To be at most 17 years old
      %>
      <%= f.date_field :date_of_birth, class: "form-control", required: true, 
          min: min_date.to_s, 
          max: max_date.to_s, 
          title: "Date of birth must result in an age between 9 and 17 years old on June 21, 2026" %>
      <small style="color: #6b7280; font-size: 0.875rem; display: block; margin-top: 0.25rem;">
        Attendees must be between 9 and 17 years old on June 21, 2026 (camp start date)
      </small>
    </div>

    <div class="form-group">
      <%= f.label :gender, class: "form-label" %>
      <%= f.select :gender, options_for_select([['Select...', ''], ['Male', 'Male'], ['Female', 'Female']], f.object.gender), {}, class: "form-control" %>
    </div>

    <div class="form-group">
      <%= f.label :tshirt_size, "T-Shirt Size", class: "form-label" %>
      <%= f.select :tshirt_size, options_for_select([['Select...', ''], ['Youth S', 'Youth S'], ['Youth M', 'Youth M'], ['Youth L', 'Youth L'], ['Youth XL', 'Youth XL'], ['Adult S', 'Adult S'], ['Adult M', 'Adult M'], ['Adult L', 'Adult L'], ['Adult XL', 'Adult XL'], ['Adult XXL', 'Adult XXL']], f.object.tshirt_size), {}, class: "form-control" %>
    </div>

    <div class="form-group">
      <label style="display: flex; align-items: center;">
        <%= f.check_box :piano, style: "margin-right: 8px;" %>
        <span style="font-size: 14px;">This attendee plays piano</span>
      </label>
    </div>

    <div class="form-group" style="grid-column: 1 / -1;">
      <div class="form-grid form-grid-3">
        <div class="form-group">
          <%= f.label :phone, "Phone Number", class: "form-label" %>
          <%= f.telephone_field :phone, class: "form-control", required: true, pattern: "[\\d\\s\\-\\(\\)\\+\\.]+", title: "Please enter a valid phone number" %>
        </div>

        <div class="form-group">
          <%= f.label :email, "Email", class: "form-label" %>
          <%= f.email_field :email, class: "form-control", required: true %>
        </div>

        <div class="form-group">
          <%= f.label :ecclesia, class: "form-label" %>
          <%= f.text_field :ecclesia, class: "form-control", required: true %>
        </div>
      </div>
    </div>

    <div class="form-group" style="grid-column: 1 / -1;">
      <label style="display: flex; align-items: center;">
        <input type="checkbox" class="attendee-same-address-checkbox" checked style="margin-right: 8px;" />
        <span style="font-size: 14px;">Same address as primary guardian</span>
      </label>
    </div>

    <div class="attendee-address-fields" style="grid-column: 1 / -1; display: none;">
      <h5 style="font-weight: 600; margin-bottom: 8px; font-size: 14px;">Address</h5>

      <div class="form-group" style="grid-column: 1 / -1;">
        <%= f.label :address_line_1, "Address Line 1", class: "form-label" %>
        <%= f.text_field :address_line_1, class: "form-control" %>
      </div>

      <div class="form-group" style="grid-column: 1 / -1;">
        <%= f.label :address_line_2, "Address Line 2 (Optional)", class: "form-label" %>
        <%= f.text_field :address_line_2, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.label :city, class: "form-label" %>
        <%= f.text_field :city, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.label :state, class: "form-label" %>
        <%= f.text_field :state, class: "form-control", maxlength: 2, pattern: "[A-Z]{2}", placeholder: "CA", title: "Please enter a 2-letter state code (e.g., CA)" %>
      </div>

      <div class="form-group">
        <%= f.label :zip, "ZIP Code", class: "form-label" %>
        <%= f.text_field :zip, class: "form-control", pattern: "\\d{5}(-\\d{4})?", title: "Please enter a valid ZIP code (e.g., 12345 or 12345-6789)" %>
      </div>
    </div>

    <div class="form-group" style="grid-column: 1 / -1;">
      <%= f.label :medical_conditions, class: "form-label" %>
      <%= f.text_area :medical_conditions, rows: 2, class: "form-control", placeholder: "Any medical conditions we should be aware of..." %>
    </div>

    <div class="form-group" style="grid-column: 1 / -1;">
      <%= f.label :dietary_restrictions, class: "form-label" %>
      <%= f.text_area :dietary_restrictions, rows: 2, class: "form-control", placeholder: "Any dietary restrictions..." %>
    </div>

    <div class="form-group" style="grid-column: 1 / -1;">
      <%= f.label :allergies, class: "form-label" %>
      <%= f.text_area :allergies, rows: 2, class: "form-control", placeholder: "Any allergies..." %>
    </div>

    <div class="form-group" style="grid-column: 1 / -1;">
      <%= f.label :notes, "Special Needs or Additional Notes", class: "form-label" %>
      <%= f.text_area :notes, rows: 3, class: "form-control", placeholder: "Any special needs, accommodations, or additional information about this child..." %>
    </div>
  </div>
</div>


